const A={"Content-Type":"application/json"},H=/\/*$/;function C(a={}){const{fetch:t=globalThis.fetch,querySerializer:n,bodySerializer:o,...c}=a;async function s(e,r){const{headers:b,body:y,params:h={},parseAs:f="json",querySerializer:m=n??L,bodySerializer:p=o??R,...E}=r||{},U=g(e,{baseUrl:c.baseUrl,params:h,querySerializer:m}),S=z(A,a?.headers,b,h.header),l={redirect:"follow",...c,...E,headers:S};y&&(l.body=p(y)),l.body instanceof FormData&&S.delete("Content-Type");const i=await t(U,l);if(i.status===204||i.headers.get("Content-Length")==="0")return i.ok?{data:{},response:i}:{error:{},response:i};if(i.ok){let T=i.body;if(f!=="stream"){const u=i.clone();T=typeof u[f]=="function"?await u[f]():await u.text()}return{data:T,response:i}}let d={};try{d=await i.clone().json()}catch{d=await i.clone().text()}return{error:d,response:i}}return{async GET(e,r){return s(e,{...r,method:"GET"})},async PUT(e,r){return s(e,{...r,method:"PUT"})},async POST(e,r){return s(e,{...r,method:"POST"})},async DELETE(e,r){return s(e,{...r,method:"DELETE"})},async OPTIONS(e,r){return s(e,{...r,method:"OPTIONS"})},async HEAD(e,r){return s(e,{...r,method:"HEAD"})},async PATCH(e,r){return s(e,{...r,method:"PATCH"})},async TRACE(e,r){return s(e,{...r,method:"TRACE"})}}}function L(a){const t=new URLSearchParams;if(a&&typeof a=="object")for(const[n,o]of Object.entries(a))o!=null&&t.set(n,o);return t.toString()}function R(a){return JSON.stringify(a)}function g(a,t){let n=`${t.baseUrl?t.baseUrl.replace(H,""):""}${a}`;if(t.params.path)for(const[o,c]of Object.entries(t.params.path))n=n.replace(`{${o}}`,encodeURIComponent(String(c)));if(t.params.query){const o=t.querySerializer(t.params.query);o&&(n+=`?${o}`)}return n}function z(...a){const t=new Headers;for(const n of a){if(!n||typeof n!="object")continue;const o=n instanceof Headers?n.entries():Object.entries(n);for(const[c,s]of o)s===null?t.delete(c):s!==void 0&&t.set(c,s)}return t}export{C as c};
