function v(e,t){return Object.keys(e).some(r=>t(e[r]))}function x(e,t){return Object.keys(e||{}).reduce((r,i)=>Object.assign(Object.assign({},r),{[i]:t(e[i])}),{})}function u(e){return Object.prototype.toString.call(e)==="[object Object]"}function m(e){return Object.keys(e||{}).reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:u(e[n])?m(e[n]):Array.isArray(e[n])?[...e[n]]:e[n]}),{})}function F(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function w(e){return function(t){if(u(t)){const n=g(t,e);return F(n,["key"])}return e}}function g(e,t){return x(e,n=>u(n)?g(n,t):Array.isArray(n)?n.map(w(t)):t)}function d(...e){const t=e.pop(),n=e.shift();if(typeof n=="string")return n;const r=m(n);if(e.length===0)return r;for(const i of e){if(!i)continue;if(typeof i=="string")return i;let f=t(r,i);if(typeof f<"u")return f;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(i))));for(const s of o)if(f=t(r[s],i[s]),typeof f<"u")r[s]=f;else if(u(i[s])&&u(r[s]))r[s]=d(r[s],i[s],t);else if(Array.isArray(i[s]))r[s]=i[s].map((a,p)=>{if(!u(a))return a;const N=Array.isArray(r[s])?r[s][p]:r[s];return d(N,a,t)});else if(u(i[s])){const a=g(m(i[s]),void 0);r[s]=d(a,i[s],t)}else typeof i[s]<"u"&&(r[s]=i[s])}return r}function D(e,t){if(!(u(e)&&u(t))){if(Array.isArray(t)){if(t.some(u))return;const n=Array.isArray(e)?e:[];return t.map((r,i)=>{var f;return(f=n[i])!==null&&f!==void 0?f:r})}if(typeof e<"u")return e}}function z(...e){return d(...e,D)}function B(...e){return d(...e,()=>{})}function y(e,t,n){const r=f=>String.prototype.split.call(t,f).filter(Boolean).reduce((o,s)=>o!=null?o[s]:o,e),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return i===void 0||i===e?n:i}function T(e,t,n){e&&(e=m(e)),u(e)||(e={});const r=Array.isArray(t)?t:t.match(/[^.[\]]+/g)||[],i=r[r.length-1];if(!i)return e;let f=e;for(let o=0;o<r.length-1;o++){const s=r[o];if(!f[s]||!u(f[s])&&!Array.isArray(f[s])){const a=r[o+1];isNaN(Number(a))?f[s]={}:f[s]=[]}f=f[s]}return f[i]=n(f[i]),e}function c(e,t,n){return T(e,t,()=>n)}function R(e,t){if(!e||Object(e)!==e)return;typeof e<"u"&&(e=m(e));const n=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[],r=n.length===1?e:y(e,n.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(n[n.length-1]),1):r==null||delete r[n[n.length-1]],e}function E(e,t){return v(e,n=>u(n)?E(n,t):Array.isArray(n)?n.length===0||n.every(r=>typeof r=="string")?t(n):n.some(r=>u(r)?E(r,t):t(r)):t(n))}function O(e){return e?.nodeName==="INPUT"}function C(e){return e?.nodeName==="TEXTAREA"}function k(e){return e?.nodeName==="SELECT"}function A(e){return e?.nodeName==="FIELDSET"}function l(e){return O(e)||C(e)||k(e)}function q(e){return e.nodeType===Node.ELEMENT_NODE}function h(e,t){return t??(l(e)?e.name:"")}function K(e){let t=e;for(;t&&t.nodeName!=="FORM";){if(t.hasAttribute("data-felte-ignore"))return!0;t=t.parentElement}return!1}function U(e,t){return!u(e)||!t?e:typeof t=="string"?y(e,t):t(e)}function b(e,t){if(!(u(e)||u(t))){if(e===null||e==="")return t;if(t===null||t===""||!t)return e;if(!(!e||!t)){if(Array.isArray(e)){if(!Array.isArray(t))return[...e,t];const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let f=e[i],o=t[i];!u(f)&&!u(o)?(Array.isArray(f)||(f=[f]),Array.isArray(o)||(o=[o]),n.push(...f,...o)):n.push(P([f??{},o??{}]))}return n.filter(Boolean)}return Array.isArray(t)||(t=[t]),[e,...t].reduce((n,r)=>n.concat(r),[]).filter(Boolean)}}}function P(e){return d(...e,b)}function W(e,t){return t?(Array.isArray(t)?t:[t]).map(r=>r(e)):[]}function X(e,t){return t?Array.isArray(t)?t.reduce((n,r)=>r(n),e):t(e):e}function $(e=8){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function S(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((n,r)=>S(n,t[r]));if(u(e)&&u(t)){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(i=>S(e[i],t[i]))}return!1}function G(e,t,{onInit:n,onEnd:r}={}){let i;return(...f)=>{i||n?.(),i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,f),i=void 0,r?.()},t)}}function I(e){if(l(e))return[e];if(e.childElementCount===0)return[];const t=new Set;for(const n of e.children){if(l(n)&&t.add(n),A(n))for(const r of n.elements)l(r)&&t.add(r);n.childElementCount>0&&I(n).forEach(r=>t.add(r))}return Array.from(t)}function _(e){for(const t of e.elements)!l(t)&&!A(t)||e.hasAttribute("data-felte-keep-on-remove")&&!t.hasAttribute("data-felte-keep-on-remove")&&(t.dataset.felteKeepOnRemove=e.dataset.felteKeepOnRemove)}function L(e){return e.type.match(/^(number|range)$/)?e.value?+e.value:null:e.value}function H(e){var t;let n={},r={};for(const i of e.elements){if(A(i)&&_(i),!l(i)||!i.name)continue;const f=h(i);if(O(i)){if(i.type==="checkbox"){if(typeof y(n,f)>"u"){if(Array.from(e.querySelectorAll(`[name="${i.name}"]`)).filter(a=>l(a)?f===h(a):!1).length===1){n=c(n,f,i.checked),r=c(r,f,!1);continue}n=c(n,f,i.checked?[i.value]:[]),r=c(r,f,!1);continue}Array.isArray(y(n,f))&&i.checked&&(n=T(n,f,s=>[...s,i.value]));continue}if(i.type==="radio"){if(y(n,f))continue;n=c(n,f,i.checked?i.value:void 0),r=c(r,f,!1);continue}if(i.type==="file"){n=c(n,f,i.multiple?Array.from(i.files||[]):(t=i.files)===null||t===void 0?void 0:t[0]),r=c(r,f,!1);continue}}else if(k(i)){if(!i.multiple)n=c(n,f,i.value);else{const a=Array.from(i.selectedOptions).map(p=>p.value);n=c(n,f,a)}r=c(r,f,!1);continue}const o=L(i);n=c(n,f,o),r=c(r,f,!1)}return{defaultData:n,defaultTouched:r}}function M(e,t){var n;if(!l(e))return;const r=t;if(O(e)){if(e.type==="checkbox"){const i=r;if(typeof i>"u"||typeof i=="boolean"){e.checked=!!i;return}Array.isArray(i)&&(i.includes(e.value)?e.checked=!0:e.checked=!1);return}if(e.type==="radio"){const i=r;e.value===i?e.checked=!0:e.checked=!1;return}if(e.type==="file"){if(t instanceof FileList)e.files=t;else if(t instanceof File&&typeof DataTransfer<"u"){const i=new DataTransfer;i.items.add(t),e.files=i.files}else if(typeof DataTransfer<"u"&&Array.isArray(t)&&t.some(i=>i instanceof File)){const i=new DataTransfer;for(const f of t)f instanceof File&&i.items.add(f);e.files=i.files}else(!t||Array.isArray(t)&&!t.length)&&(e.files=null,e.value="");return}}else if(k(e)){if(e.multiple){if(Array.isArray(r)){e.value=String((n=r[0])!==null&&n!==void 0?n:"");const f=r.map(o=>String(o));for(const o of e.options)f.includes(o.value)?o.selected=!0:o.selected=!1}}else{e.value=String(r??"");for(const f of e.options)f.value===String(r)?f.selected=!0:f.selected=!1}return}e.value=String(r??"")}function J(e,t){for(const n of e.elements){if(A(n)&&_(n),!l(n)||!n.name)continue;const r=h(n);M(n,y(t,r))}}export{U as A,S as B,x as _,u as a,y as b,$ as c,c as d,g as e,m as f,B as g,E as h,l as i,T as j,R as k,H as l,h as m,k as n,K as o,L as p,O as q,q as r,J as s,I as t,G as u,z as v,X as w,P as x,d as y,W as z};
