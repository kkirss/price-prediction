const w={context:void 0,registry:void 0};function N(e){w.context=e}const ce=(e,t)=>e===t,q=Symbol("solid-proxy"),xe=Symbol("solid-track"),Se=Symbol("solid-dev-component"),D={equals:ce};let fe=ne;const S=1,T=2,J={owned:null,cleanups:null,context:null,owner:null},_={};var i=null;let F=null,c=null,g=null,O=null,V=0;function Oe(e,t){const n=c,r=i,u=e.length===0,s=t===void 0?r:t,o=u?J:{owned:null,cleanups:null,context:s?s.context:null,owner:s},l=u?e:()=>e(()=>v(()=>I(o)));i=o,c=null;try{return m(l,!0)}finally{c=n,i=r}}function j(e,t){t=t?Object.assign({},D,t):D;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=u=>(typeof u=="function"&&(u=u(n.value)),ee(n,u));return[Z.bind(n),r]}function Y(e,t,n){const r=z(e,t,!0,S);k(r)}function ae(e,t,n){const r=z(e,t,!1,S);k(r)}function A(e,t,n){n=n?Object.assign({},D,n):D;const r=z(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,k(r),Z.bind(r)}function de(e,t,n){let r,u,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,u=e,s=t||{}):(r=e,u=t,s=n||{});let o=null,l=_,a=null,b=!1,d="initialValue"in s,y=typeof r=="function"&&A(r);const x=new Set,[E,G]=(s.storage||j)(s.initialValue),[L,ue]=j(void 0),[oe,le]=j(void 0,{equals:!1}),[Q,X]=j(d?"ready":"unresolved");if(w.context){a=`${w.context.id}${w.context.count++}`;let f;s.ssrLoadFrom==="initial"?l=s.initialValue:w.load&&(f=w.load(a))&&(l=f[0])}function C(f,h,p,P){return o===f&&(o=null,P!==void 0&&(d=!0),(f===l||h===l)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(P,{value:h})),l=_,ie(h,p)),h}function ie(f,h){m(()=>{h===void 0&&G(()=>f),X(h!==void 0?"errored":d?"ready":"unresolved"),ue(h);for(const p of x.keys())p.decrement();x.clear()},!1)}function R(){const f=pe,h=E(),p=L();if(p!==void 0&&!o)throw p;return c&&!c.user&&f&&Y(()=>{oe(),o&&(f.resolved||x.has(f)||(f.increment(),x.add(f)))}),h}function M(f=!0){if(f!==!1&&b)return;b=!1;const h=y?y():r;if(h==null||h===!1){C(o,v(E));return}const p=l!==_?l:v(()=>u(h,{value:E(),refetching:f}));return typeof p!="object"||!(p&&"then"in p)?(C(o,p,void 0,h),p):(o=p,b=!0,queueMicrotask(()=>b=!1),m(()=>{X(d?"refreshing":"pending"),le()},!1),p.then(P=>C(p,P,void 0,h),P=>C(p,void 0,se(P),h)))}return Object.defineProperties(R,{state:{get:()=>Q()},error:{get:()=>L()},loading:{get(){const f=Q();return f==="pending"||f==="refreshing"}},latest:{get(){if(!d)return R();const f=L();if(f&&!o)throw f;return E()}}}),y?Y(()=>M(!1)):M(!1),[R,{refetch:M,mutate:G}]}function Ae(e){return m(e,!1)}function v(e){if(c===null)return e();const t=c;c=null;try{return e()}finally{c=t}}function Pe(e,t,n){const r=Array.isArray(e);let u,s=n&&n.defer;return o=>{let l;if(r){l=Array(e.length);for(let b=0;b<e.length;b++)l[b]=e[b]()}else l=e();if(s){s=!1;return}const a=v(()=>t(l,u,o));return u=l,a}}function je(e){return i===null||(i.cleanups===null?i.cleanups=[e]:i.cleanups.push(e)),e}function ke(){return c}function Ee(){return i}function Ce(e,t){const n=i,r=c;i=e,c=null;try{return m(t,!0)}catch(u){B(u)}finally{i=n,c=r}}function Ne(e){const t=c,n=i;return Promise.resolve().then(()=>{c=t,i=n;let r;return m(e,!1),c=i=null,r?r.done:void 0})}function $e(e,t){const n=Symbol("context");return{id:n,Provider:ye(n),defaultValue:e}}function qe(e){return i&&i.context&&i.context[e.id]!==void 0?i.context[e.id]:e.defaultValue}function he(e){const t=A(e),n=A(()=>K(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let pe;function Z(){if(this.sources&&this.state)if(this.state===S)k(this);else{const e=g;g=null,m(()=>U(this),!1),g=e}if(c){const e=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(e)):(c.sources=[this],c.sourceSlots=[e]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function ee(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&m(()=>{for(let u=0;u<e.observers.length;u+=1){const s=e.observers[u],o=F&&F.running;o&&F.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?g.push(s):O.push(s),s.observers&&re(s)),o||(s.state=S)}if(g.length>1e6)throw g=[],new Error},!1)),t}function k(e){if(!e.fn)return;I(e);const t=i,n=c,r=V;c=i=e,ge(e,e.value,r),c=n,i=t}function ge(e,t,n){let r;try{r=e.fn(t)}catch(u){return e.pure&&(e.state=S,e.owned&&e.owned.forEach(I),e.owned=null),e.updatedAt=n+1,B(u)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ee(e,r):e.value=r,e.updatedAt=n)}function z(e,t,n,r=S,u){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:i,context:i?i.context:null,pure:n};return i===null||i!==J&&(i.owned?i.owned.push(s):i.owned=[s]),s}function te(e){if(e.state===0)return;if(e.state===T)return U(e);if(e.suspense&&v(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<V);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===S)k(e);else if(e.state===T){const r=g;g=null,m(()=>U(e,t[0]),!1),g=r}}function m(e,t){if(g)return e();let n=!1;t||(g=[]),O?n=!0:O=[],V++;try{const r=e();return be(n),r}catch(r){n||(O=null),g=null,B(r)}}function be(e){if(g&&(ne(g),g=null),e)return;const t=O;O=null,t.length&&m(()=>fe(t),!1)}function ne(e){for(let t=0;t<e.length;t++)te(e[t])}function U(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const u=r.state;u===S?r!==t&&(!r.updatedAt||r.updatedAt<V)&&te(r):u===T&&U(r,t)}}}function re(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=T,n.pure?g.push(n):O.push(n),n.observers&&re(n))}}function I(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),u=n.observers;if(u&&u.length){const s=u.pop(),o=n.observerSlots.pop();r<u.length&&(s.sourceSlots[o]=r,u[r]=s,n.observerSlots[r]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)I(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function se(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function B(e,t=i){throw se(e)}function K(e){if(typeof e=="function"&&!e.length)return K(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=K(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function ye(e,t){return function(r){let u;return ae(()=>u=v(()=>(i.context={...i.context,[e]:r.value},he(()=>r.children))),void 0),u}}function De(e,t){return v(()=>e(t||{}))}function $(){return!0}const W={get(e,t,n){return t===q?n:e.get(t)},has(e,t){return t===q?!0:e.has(t)},set:$,deleteProperty:$,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:$,deleteProperty:$}},ownKeys(e){return e.keys()}};function H(e){return(e=typeof e=="function"?e():e)?e:{}}function we(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Te(...e){let t=!1;for(let s=0;s<e.length;s++){const o=e[s];t=t||!!o&&q in o,e[s]=typeof o=="function"?(t=!0,A(o)):o}if(t)return new Proxy({get(s){for(let o=e.length-1;o>=0;o--){const l=H(e[o])[s];if(l!==void 0)return l}},has(s){for(let o=e.length-1;o>=0;o--)if(s in H(e[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<e.length;o++)s.push(...Object.keys(H(e[o])));return[...new Set(s)]}},W);const n={},r={},u=new Set;for(let s=e.length-1;s>=0;s--){const o=e[s];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let a=0,b=l.length;a<b;a++){const d=l[a];if(d==="__proto__"||d==="constructor")continue;const y=Object.getOwnPropertyDescriptor(o,d);if(!u.has(d))y.get?(u.add(d),Object.defineProperty(n,d,{enumerable:!0,configurable:!0,get:we.bind(r[d]=[y.get.bind(o)])})):(y.value!==void 0&&u.add(d),n[d]=y.value);else{const x=r[d];x?y.get?x.push(y.get.bind(o)):y.value!==void 0&&x.push(()=>y.value):n[d]===void 0&&(n[d]=y.value)}}}return n}function Ue(e,...t){if(q in e){const u=new Set(t.length>1?t.flat():t[0]),s=t.map(o=>new Proxy({get(l){return o.includes(l)?e[l]:void 0},has(l){return o.includes(l)&&l in e},keys(){return o.filter(l=>l in e)}},W));return s.push(new Proxy({get(o){return u.has(o)?void 0:e[o]},has(o){return u.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!u.has(o))}},W)),s}const n={},r=t.map(()=>({}));for(const u of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,u),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let l=!1,a=0;for(const b of t)b.includes(u)&&(l=!0,o?r[a][u]=s.value:Object.defineProperty(r[a],u,s)),++a;l||(o?n[u]=s.value:Object.defineProperty(n,u,s))}return[...r,n]}function Ve(e){let t,n;const r=u=>{const s=w.context;if(s){const[l,a]=j();w.count||(w.count=0),w.count++,(n||(n=e())).then(b=>{N(s),w.count--,a(()=>b.default),N()}),t=l}else if(!t){const[l]=de(()=>(n||(n=e())).then(a=>a.default));t=l}let o;return A(()=>(o=t())&&v(()=>{if(!s)return o(u);const l=w.context;N(s);const a=o(u);return N(l),a}))};return r.preload=()=>n||((n=e()).then(u=>t=()=>u.default),n),r}let ve=0;function Ie(){const e=w.context;return e?`${e.id}${e.count++}`:`cl-${ve++}`}const me=e=>`Stale read from <${e}>.`;function Le(e){const t=e.keyed,n=A(()=>e.when,void 0,{equals:(r,u)=>t?r===u:!r==!u});return A(()=>{const r=n();if(r){const u=e.children;return typeof u=="function"&&u.length>0?v(()=>u(t?r:()=>{if(!v(n))throw me("Show");return e.when})):u}return e.fallback},void 0,void 0)}function Re(){}export{Se as $,Le as S,ae as a,j as b,Oe as c,A as d,$e as e,qe as f,Ee as g,Pe as h,Ne as i,Re as j,De as k,he as l,Te as m,q as n,je as o,xe as p,ke as q,Ce as r,w as s,Ae as t,v as u,Ie as v,Ue as w,Y as x,Ve as y};
